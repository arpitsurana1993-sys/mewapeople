<!-- Version: 1.0.1 | Updated: 2025-12-26 -->
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Admin Panel - Surana Ashok Kumar Arvind Kumar</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{font-family:Arial;background:#f1f8e9;margin:0;padding:15px}
.container{max-width:1100px;margin:auto;background:#fff;padding:20px;border-radius:12px}
h1{text-align:center;color:#1b5e20}
nav{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:15px}
nav button{padding:10px 15px;border:none;border-radius:20px;background:#2e7d32;color:#fff;cursor:pointer}
section{display:none}
section.active{display:block}
input,select{width:100%;padding:8px;margin-top:5px}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{border:1px solid #ccc;padding:8px;text-align:center}
th{background:#e8f5e9}
.delete{color:red;cursor:pointer}
</style>
</head>

<body>
<div class="container">

<div style="display:flex;justify-content:space-between;align-items:center;">
  <h1 style="margin:0">üõí Surana Ashok Kumar Arvind Kumar ‚Äì Admin</h1>
  <button id="refreshOrdersBtn"
   style="padding:10px 18px;border:none;border-radius:20px;
   background:#1976d2;color:#fff;cursor:pointer;font-size:16px;">üîÑ</button>
</div>

<!-- LOGIN -->
<section id="loginSection" class="active">
<h3>Admin Login</h3>
<input id="adminId" placeholder="Admin ID">
<input id="adminPass" type="password" placeholder="Password">
<button onclick="login()">Login</button>
</section>

<!-- MAIN -->
<section id="mainSection">

<nav>
<button onclick="showTab('cred')">Change Login</button>
<button onclick="showTab('cat')">Categories</button>
<button onclick="showTab('item')">Items</button>
<button onclick="showTab('orders')">Orders</button>
</nav>

<!-- CHANGE CREDENTIAL -->
<section id="cred">
<h3>Change Login Credentials</h3>
<input id="newId" placeholder="New Admin ID">
<input id="newPass" placeholder="New Password">
<button onclick="changeCred()">Update</button>
</section>

<!-- CATEGORIES -->
<section id="cat">
<h3>Categories</h3>
<input id="catEn" placeholder="Category (English)">
<input id="catHi" placeholder="Category (Hindi ‚Äì type English)">
<button onclick="addCategory()">Add</button>

<table>
<thead>
<tr><th>English</th><th>Hindi</th><th>‚ùå</th></tr>
</thead>
<tbody id="catTable"></tbody>
</table>
</section>

<!-- ITEMS -->
<section id="item">
<h3>Items</h3>
<select id="catSelect"></select>
<input id="itemEn" placeholder="Item (English)">
<input id="itemHi" placeholder="Item (Hindi ‚Äì type English)">
<button onclick="addItem()">Add</button>

<table>
<thead>
<tr><th>Category</th><th>English</th><th>Hindi</th><th>‚ùå</th></tr>
</thead>
<tbody id="itemTable"></tbody>
</table>
</section>

<!-- ORDERS -->
<section id="orders">
<h3>Orders</h3>
<table>
<thead>
<tr>
<th>Order No</th>
<th>Name</th>
<th>Mobile</th>
<th>Address</th>
<th>Type</th>
<th>Items</th>
<th>Time</th>
<th>‚ùå</th>
<th>Print</th>
</tr>
</thead>
<tbody id="orderTable"></tbody>
</table>

<!-- PRINT AREA -->
<div id="printOrder"
 style="width:700px;margin:auto;border:1px solid #ccc;
 padding:20px;background:#fff;display:none">

<h2>Order Details</h2>
<p><strong>Name:</strong> <span id="pName"></span></p>
<p><strong>Address:</strong> <span id="pAddress"></span></p>
<p><strong>Phone:</strong> <span id="pMobile"></span></p>
<p><strong>Delivery:</strong> <span id="pType"></span></p>

<table border="1" cellspacing="0" cellpadding="8"
 style="width:100%;border-collapse:collapse">
<thead>
<tr>
<th>Item</th>
<th>Quantity</th>
<th>Packets</th>
<th>Price</th>
</tr>
</thead>
<tbody id="pItems"></tbody>
</table>
</div>

<style>
@media print{
 body *{visibility:hidden}
 #printOrder,#printOrder *{visibility:visible}
 #printOrder{position:absolute;left:0;top:0;width:100%}
}
</style>

</section>
</section>
</div>

<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import {
 getFirestore, collection, addDoc, getDocs,
 deleteDoc, doc, setDoc, getDoc
} from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

const firebaseConfig = {
 apiKey: "AIzaSyDKzDGac5Zl1RZlZDnkeNZrMf6OGabSiRY",
 authDomain: "mewapeople-25844.firebaseapp.com",
 projectId: "mewapeople-25844",
 storageBucket: "mewapeople-25844.firebasestorage.app",
 messagingSenderId: "53407017674",
 appId: "1:53407017674:web:1667bb04862a76c02a6233"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

/* LOGIN */
window.login = async () => {
 let snap = await getDoc(doc(db,"config","login"));
 let d = snap.data();
 if(adminId.value===d.id && adminPass.value===d.pass){
  loginSection.style.display="none";
  mainSection.style.display="block";
  loadAll();
 } else alert("Wrong login");
};

document.getElementById("refreshOrdersBtn").onclick=()=>{
 loadOrders();showTab("orders");
};

window.changeCred=async()=>{
 await setDoc(doc(db,"config","login"),{
  id:newId.value,pass:newPass.value
 });
 alert("Updated");
};

/* NAV */
window.showTab=id=>{
 document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
 document.getElementById(id).classList.add("active");
};

/* CATEGORY */
window.addCategory=async()=>{
 await addDoc(collection(db,"categories"),{
  en:catEn.value,hi:catHi.value
 });
 catEn.value=catHi.value="";
 loadCategories();
};

async function loadCategories(){
 catTable.innerHTML="";
 catSelect.innerHTML="";
 let s=await getDocs(collection(db,"categories"));
 s.forEach(d=>{
  let c=d.data();
  catTable.innerHTML+=`
   <tr><td>${c.en}</td><td>${c.hi}</td>
   <td class="delete" onclick="delCat('${d.id}')">‚ùå</td></tr>`;
  catSelect.innerHTML+=`
   <option value="${c.en}">${c.en} / ${c.hi}</option>`;
 });
}
window.delCat=async id=>{
 await deleteDoc(doc(db,"categories",id));
 loadCategories();
};

/* ITEMS */
window.addItem=async()=>{
 await addDoc(collection(db,"items"),{
  cat:catSelect.value,en:itemEn.value,hi:itemHi.value
 });
 itemEn.value=itemHi.value="";
 loadItems();
};

async function loadItems(){
 itemTable.innerHTML="";
 let s=await getDocs(collection(db,"items"));
 s.forEach(d=>{
  let i=d.data();
  itemTable.innerHTML+=`
  <tr>
   <td>${i.cat}</td><td>${i.en}</td><td>${i.hi}</td>
   <td class="delete" onclick="delItem('${d.id}')">‚ùå</td>
  </tr>`;
 });
}
window.delItem=async id=>{
 await deleteDoc(doc(db,"items",id));
 loadItems();
};

/* ORDERS */
async function loadOrders(){
 orderTable.innerHTML="";
 let s=await getDocs(collection(db,"orders"));
 let arr=[];
 s.forEach(d=>{let o=d.data();o._id=d.id;arr.push(o);});
 arr.sort((a,b)=>Date.parse(b.time)-Date.parse(a.time));
 arr.forEach((o,i)=>{
  let sn="MP"+(101+i);
  orderTable.innerHTML+=`
<tr>
<td>${sn}</td><td>${o.name}</td><td>${o.mobile}</td>
<td>${o.address}</td><td>${o.type}</td>
<td>${o.items}</td><td>${o.time}</td>
<td class="delete" onclick="delOrder('${o._id}')">‚ùå</td>
<td><button onclick="printOrder('${encodeURIComponent(JSON.stringify(o))}')">üñ®Ô∏è</button></td>
</tr>`;
 });
}

window.printOrder=function(str){
 let o=JSON.parse(decodeURIComponent(str));
 pName.textContent=o.name||"";
 pAddress.textContent=o.address||"";
 pMobile.textContent=o.mobile||"";
 pType.textContent=o.type||"";

 let rows="";
 (o.items||"").split("\n").forEach(l=>{
  let p=l.match(/‡§™‡•à‡§ï‡•á‡§ü:\s*(\d+)/);
  let packets=p?p[1]:"";
  let clean=l.replace(/,?\s*‡§™‡•à‡§ï‡•á‡§ü:\s*\d+/,"").trim();
  let m=clean.match(/^(.*)\s(\d+(\.\d+)?)\s([^\s]+)$/);
  if(m){
   rows+=`<tr><td>${m[1]}</td><td>${m[2]} ${m[4]}</td><td>${packets}</td><td></td></tr>`;
  }
 });
 pItems.innerHTML=rows;
 printOrder.style.display="block";
 setTimeout(()=>{window.print();printOrder.style.display="none"},200);
};

window.delOrder=async id=>{
 await deleteDoc(doc(db,"orders",id));
 loadOrders();
};

async function loadAll(){
 showTab("cat");
 loadCategories();loadItems();loadOrders();
}
</script>

<!-- GOOGLE HINDI TYPING -->
<script src="https://www.google.com/jsapi"></script>
<script>
google.load("elements","1",{packages:["transliteration"]});
google.setOnLoadCallback(()=>{
 new google.elements.transliteration.TransliterationControl({
  sourceLanguage:'en',destinationLanguage:['hi'],transliterationEnabled:true
 }).makeTransliteratable(['catHi','itemHi']);
});
</script>

</body>
</html>
